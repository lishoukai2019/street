<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
	PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.dao.UsersInformDao">

	<select id="queryWechatByOpenId"
			resultMap="usersInformMap">
		SELECT
		wechat_auth_id,
		open_id,
		create_time,
		user_id
		FROM
		tb_wechat_auth
		WHERE
		open_id=#{openId}
	</select>


	<select id="queryWechatByUserId"
			resultMap="usersInformMap">
		SELECT
		wechat_auth_id,
		open_id,
		create_time,
		user_id
		FROM
		tb_wechat_auth
		WHERE
		user_id=#{userId}
	</select>


	<insert id="insertWechatAuth"
			parameterType="com.entity.UsersInform"
			useGeneratedKeys="true" keyProperty="wechatAuthId"
			keyColumn="wechat_auth_id">
		INSERT
		INTO
		tb_wechat_auth(open_id,create_time,user_id)
		VALUES
		(#{openId},#{createTime},#{userId})
	</insert>

	<resultMap id="usersInformMap" type="com.entity.UsersInform">
		<id property="wechatAuthId" column="wechat_auth_id"/>
		<result property="userId" column="user_Id"/>
		<result property="openId" column="open_id"/>
		<result property="createTime" column="create_time"/>
	</resultMap>
</mapper>